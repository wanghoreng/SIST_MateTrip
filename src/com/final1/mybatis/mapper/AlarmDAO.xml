<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.final1.logic.IAlarmDAO">

	<select id="alarmList" resultType="com.final1.logic.AlarmDTO">
	<![CDATA[
		SELECT  E.EXIT_NUM AS "NUM", '강제퇴장 알림' AS "TITLE", 
    '방장에 의해 강제퇴장 되었습니다.' AS "ALARMCONTENT"
    , BR.ROOM_TITLE AS "ROOMTITLE" 
    , TO_CHAR(E.EXIT_DATE,'YYYY-MM-DD') AS "ALARMDATE"
		FROM EXIT E JOIN MEM_JOIN MJ 
		ON E.mem_join_num = MJ.mem_join_num
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = MJ.ROOM_NUM
		WHERE E.EXIT_REASON_NUM = 2
		AND E.ALARM_CHECK_DATE IS NULL
		AND E.MEM_JOIN_NUM IN (SELECT MEM_JOIN_NUM
		                                        FROM MEM_JOIN MJ 
		                                        WHERE MJ.ID_NUM = #{my_id})
		UNION ALL
		
		SELECT   E.EXIT_NUM AS "NUM", '방 삭제 알림' AS "TITLE", '방장이 방을 삭제하여 방 참여가 취소되었습니다.' AS "ALARMCONTENT", BR.ROOM_TITLE AS "ROOMTITLE" ,  TO_CHAR(E.EXIT_DATE,'YYYY-MM-DD') AS "ALARMDATE"
		FROM EXIT E JOIN MEM_JOIN MJ 
		ON E.mem_join_num = MJ.mem_join_num
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = MJ.ROOM_NUM
		WHERE E.EXIT_REASON_NUM = 3
		AND E.ALARM_CHECK_DATE IS NULL
		AND E.MEM_JOIN_NUM IN  (SELECT MEM_JOIN_NUM
		                                        FROM MEM_JOIN MJ 
		                                        WHERE MJ.ID_NUM = #{my_id})
		
		UNION ALL
		
		SELECT  HPS.HOST_PASS_ALARM_NUM AS "NUM", '방장 패스 알림' AS "TITLE", '방장이 '|| HP.DAY ||'일차 패스를 눌렀습니다.' AS "ALARMCONTENT", BR.ROOM_TITLE AS "ROOMTITLE" ,  TO_CHAR(HP.PASS_DATE,'YYYY-MM-DD') AS "ALARMDATE"
		FROM HOST_PASS HP JOIN HOST_PASS_ALARM HPS
		ON HP.HOST_PASS_NUM = HPS.HOST_PASS_NUM
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = HP.ROOM_NUM
		WHERE HPS.ALARM_CHECK_DATE IS NULL
		AND HPS.MEM_JOIN_NUM IN (SELECT OG.MEM_JOIN_NUM
		                                            FROM ONGOING OG JOIN MEM_JOIN MJ 
		                                            ON mj.mem_join_num = og.mem_join_num
		                                            WHERE MJ.ID_NUM = #{my_id})
		UNION ALL                     
		
		SELECT BA.BOOKMARK_ALARM_NUM AS "NUM",  '북마크 방 참여 가능 알림' AS "TITLE",  '해당 방에 참여가 가능합니다.' AS "ALARMCONTENT", BR.ROOM_TITLE AS "ROOMTITLE" , TO_CHAR(BA.ALARM_ADD_DATE,'YYYY-MM-DD') AS "ALARMDATE"
		FROM BOOKMARK_ALARM BA JOIN BOOKMARK B
		ON ba.bookmark_num = b.bookmark_num
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = B.ROOM_NUM
		JOIN MEMBER M
		ON m.mem_num = b.mem_num
		WHERE ALARM_CHECK_DATE IS NULL
		  AND M.ID_NUM = #{my_id}
		  
		  UNION ALL            
		  
		SELECT  GA.GO_ALARM_NUM AS "NUM", '방 출발 가능 알림' AS "TITLE", '해당 방에 출발이 가능합니다.' AS "ALARMCONTENT", BR.ROOM_TITLE AS "ROOMTITLE" , TO_CHAR(GA.GO_ALARM_ADD_DATE,'YYYY-MM-DD')  AS "ALARMDATE"
		FROM GO_ALARM GA JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = GA.ROOM_NUM
		WHERE BR.ID_NUM = #{my_id}
		AND ALARM_CHECK_DATE IS NULL
		
		UNION ALL  
		 
		SELECT MF.MEM_FINISH_NUM AS "NUM",  '방 출발 알림' AS "TITLE",  '해당 방이 출발하였습니다. ' AS "ALARMCONTENT", BR.ROOM_TITLE AS "ROOMTITLE" , TO_CHAR(BR.FINAL_GO_DATE,'YYYY-MM-DD')  AS "ALARMDATE"
		FROM MEM_FINISH MF JOIN MEM_JOIN MJ 
		ON MF.mem_join_num = MJ.mem_join_num
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = MJ.ROOM_NUM
		WHERE MF.GO_ALARM_CHECK_DATE IS NULL
		AND MJ. ID_NUM  =#{my_id}
		AND BR.FINAL_GO_DATE IS NOT NULL
		
		 UNION ALL  
		 
		SELECT MF.MEM_FINISH_NUM AS "NUM", '여행 점수 알림' AS "TITLE", TO_CHAR(TRIP_END_DATE +14,'YYYY-MM-DD') || ' 까지 여행을 같이 다녀온 메이트에게 여행 점수를 줄 수 있습니다. <BR><br> <small> - 마이페이지 완료된 방에서 여행 점수 부여 가능- </small>' 
		AS "ALARMCONTENT", BR.ROOM_TITLE AS "ROOMTITLE" , TO_CHAR(BR.TRIP_END_DATE+1,'YYYY-MM-DD') AS "ALARMDATE"
		FROM MEM_FINISH MF JOIN MEM_JOIN MJ 
		ON MF.mem_join_num = MJ.mem_join_num
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = MJ.ROOM_NUM   
		WHERE SYSDATE - TRIP_END_DATE >0
		 AND MJ.ID_NUM = #{my_id}
		 AND ALARM_CHECK_DATE IS NULL
		 
		  UNION ALL  
		 
		
		SELECT FRR.FEED_REPORT_RECEIPT_NUM AS "NUM", '피드 신고 알림' AS "TITLE", '피드 신고를 받았습니다. ' AS "ALARMCONTENT",  BR.ROOM_TITLE AS "ROOMTITLE",  TO_CHAR( FRR.REPORT_DATE,'YYYY-MM-DD')  AS "ALARMDATE"
		FROM FEED_REPORT_RECEIPT FRR JOIN FEED F 
		ON FRR.FEED_NUM = F.FEED_NUM
		JOIN REPORT_REASON RR
		ON RR.REPORT_REASON_NUM = FRR.REPORT_REASON_NUM
		JOIN MEM_JOIN MJ 
		ON F.mem_join_num = MJ.mem_join_num
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = MJ.ROOM_NUM   
		WHERE ALARM_CHECK_DATE IS NULL
		 AND MJ.ID_NUM = #{my_id}
		 
		 UNION ALL
		 
		 SELECT FRR.CM_REPORT_RECEIPT_NUM AS "NUM",'컬렉션 메모 신고 알림' AS "TITLE", '컬렉션 메모 신고를 받았습니다.  ' AS "ALARMCONTENT",  BR.ROOM_TITLE AS "ROOMTITLE", TO_CHAR( FRR.REPORT_DATE,'YYYY-MM-DD')  AS "ALARMDATE"
		FROM CM_REPORT_RECEIPT FRR JOIN COLLECTION_MEMO F 
		ON FRR.COLLECTION_MEMO_NUM = F.COLLECTION_MEMO_NUM
		JOIN REPORT_REASON RR
		ON RR.REPORT_REASON_NUM = FRR.REPORT_REASON_NUM
		JOIN MEM_JOIN MJ 
		ON F.mem_join_num = MJ.mem_join_num
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = MJ.ROOM_NUM   
		WHERE ALARM_CHECK_DATE IS NULL
		 AND MJ.ID_NUM = #{my_id}
		 
		  UNION ALL
		 
		 SELECT FRR.PM_REPORT_RECEIPT_NUM AS "NUM", '플래너 메모 신고 알림' AS "TITLE", '플래너 메모 신고를 받았습니다. ' AS "ALARMCONTENT",  BR.ROOM_TITLE AS "ROOMTITLE",  TO_CHAR( FRR.REPORT_DATE,'YYYY-MM-DD')  AS "ALARMDATE"
		FROM PM_REPORT_RECEIPT FRR JOIN PLANNER_MEMO F 
		ON FRR.PLANNER_MEMO_NUM = F.PLANNER_MEMO_NUM
		JOIN REPORT_REASON RR
		ON RR.REPORT_REASON_NUM = FRR.REPORT_REASON_NUM
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = F.ROOM_NUM   
		WHERE ALARM_CHECK_DATE IS NULL
		 AND BR.ID_NUM = #{my_id}
		 
		UNION ALL
		 
		 SELECT FRR.ROOM_REPORT_RECEIPT_NUM AS "NUM", '방 신고 알림' AS "TITLE", '방 신고를 받았습니다. ' AS "ALARMCONTENT",  BR.ROOM_TITLE AS "ROOMTITLE",  TO_CHAR( FRR.REPORT_DATE,'YYYY-MM-DD')  AS "ALARMDATE"
		FROM ROOM_REPORT_RECEIPT FRR 
		JOIN REPORT_REASON RR
		ON RR.REPORT_REASON_NUM = FRR.REPORT_REASON_NUM
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = FRR.ROOM_NUM   
		WHERE ALARM_CHECK_DATE IS NULL
		 AND BR.ID_NUM = #{my_id}
		 
		 UNION ALL
		 
		SELECT FRR.PF_REPORT_RECEIPT_NUM AS "NUM",'프로필 신고 알림' AS "TITLE", '프로필 신고를 받았습니다. ' AS "ALARMCONTENT", ' ' AS "ROOMTITLE" , TO_CHAR( FRR.REPORT_DATE,'YYYY-MM-DD')  AS "ALARMDATE"
		FROM PF_REPORT_RECEIPT FRR 
		JOIN REPORT_REASON RR
		ON RR.REPORT_REASON_NUM = FRR.REPORT_REASON_NUM
		WHERE ALARM_CHECK_DATE IS NULL
		 AND REPORTED_ID_NUM = #{my_id}
		 
		  UNION ALL
		 
		 SELECT  
		  RRP.ROOM_REPORT_PENALTY_NUM AS "NUM", '방 신고 패널티 알림' AS "TITLE"
		 ,TO_CHAR(RR.REPORT_DATE,'YYYY-MM-DD') ||' 일자 방 신고가 처리되어 <BR> "'|| RRT.CONTENT || '" 패널티를 받았습니다. <BR>패널티는 '|| TO_CHAR(RRP.START_DATE,'YYYY-MM-DD') ||' 부터 적용됩니다.'  AS "ALARMCONTENT"
		  , ' ' AS "ROOMTITLE", TO_CHAR(RRR.REPORT_RESULT_DATE,'YYYY-MM-DD')    AS "ALARMDATE" 
		 FROM ROOM_REPORT_PENALTY RRP JOIN ROOM_REPORT_RESULT RRR
		 ON RRR.ROOM_REPORT_RESULT_NUM = RRP.ROOM_REPORT_RESULT_NUM
		 JOIN ROOM_REPORT_RESULT_TYPE RRT
		 ON RRR.REPORT_RESULT_TYPE_NUM = RRT.ROOM_REPORT_RESULT_TYPE_NUM
		 JOIN ROOM_REPORT_RECEIPT RR 
		 ON rr.room_report_receipt_num = rrr.room_report_receipt_num
		 JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = RR.ROOM_NUM
		WHERE RRP.ALARM_CHECK_DATE IS NULL
		AND RRT.ROOM_REPORT_RESULT_TYPE_NUM >=3 AND  RRT.ROOM_REPORT_RESULT_TYPE_NUM <=7
		AND BR.ID_NUM = #{my_id}
		
		 UNION ALL
		 
		  SELECT  
		   RRP.ROOM_REPORT_PENALTY_NUM AS "NUM", '방 신고 패널티 알림' AS "TITLE"
		  ,TO_CHAR(RR.REPORT_DATE,'YYYY-MM-DD') ||' 일자 방 신고가 처리되어 <BR>" 신고자 계정정지 3일 " 패널티를 받았습니다. <BR>패널티는 '|| TO_CHAR(RRP.START_DATE,'YYYY-MM-DD')||' 부터 적용됩니다.'  AS "ALARMCONTENT"
		  ,  ' ' AS "ROOMTITLE", TO_CHAR(RRR.REPORT_RESULT_DATE,'YYYY-MM-DD')  AS "ALARMDATE"
		 FROM ROOM_REPORT_PENALTY RRP JOIN ROOM_REPORT_RESULT RRR
		 ON RRR.ROOM_REPORT_RESULT_NUM = RRP.ROOM_REPORT_RESULT_NUM
		 JOIN ROOM_REPORT_RESULT_TYPE RRT
		 ON RRR.REPORT_RESULT_TYPE_NUM = RRT.ROOM_REPORT_RESULT_TYPE_NUM
		 JOIN ROOM_REPORT_RECEIPT RR 
		 ON rr.room_report_receipt_num = rrr.room_report_receipt_num
		WHERE RRP.ALARM_CHECK_DATE IS NULL
		AND RRT.ROOM_REPORT_RESULT_TYPE_NUM =2
		AND rrr.ID_NUM = #{my_id}
		
		 UNION ALL
		 
		 SELECT  
		   FRP.FEED_REPORT_PENALTY_NUM AS "NUM", '피드 신고 패널티 알림' AS "TITLE" 
		 ,TO_CHAR(FRR.REPORT_DATE,'YYYY-MM-DD') ||' 일자 피드 신고가 처리되어 <br>"'|| FRRT.CONTENT || '" 패널티를 받았습니다. <BR>패널티는 '|| TO_CHAR(FRP.START_DATE,'YYYY-MM-DD')||' 부터 적용됩니다.'  AS "ALARMCONTENT"
		,  ' ' AS "ROOMTITLE", TO_CHAR( FRRR.RESULT_DATE,'YYYY-MM-DD')  AS "ALARMDATE"
		 FROM FEED_REPORT_PENALTY FRP JOIN FEED_REPORT_RESULT FRRR
		 ON FRRR.FEED_REPORT_RESULT_NUM = FRP.FEED_REPORT_RESULT_NUM
		 JOIN FEED_REPORT_RESULT_TYPE FRRT
		 ON FRRR.FEED_REPORT_RESULT_TYPE_NUM = FRRT.FEED_REPORT_RESULT_TYPE_NUM
		 JOIN FEED_REPORT_RECEIPT FRR 
		 ON FRR.FEED_report_receipt_num = FRRR.FEED_report_receipt_num
		JOIN FEED F 
		ON FRR.FEED_NUM = F.FEED_NUM
		JOIN MEM_JOIN MJ 
		ON F.mem_join_num = MJ.mem_join_num
		WHERE FRP.ALARM_CHECK_DATE IS NULL
		AND FRRT.FEED_REPORT_RESULT_TYPE_NUM >=3 AND  FRRT.FEED_REPORT_RESULT_TYPE_NUM <=7
		AND MJ.ID_NUM = #{my_id}
		
		UNION ALL
		 
		 SELECT 
		 FRP.FEED_REPORT_PENALTY_NUM AS "NUM",  '피드 신고 패널티 알림' AS "TITLE" 
		 ,TO_CHAR(FRR.REPORT_DATE,'YYYY-MM-DD') ||' 일자 피드 신고가 처리되어 <br>" 신고자 계정정지 3일 " 패널티를 받았습니다. <BR>패널티는 '|| TO_CHAR(FRP.START_DATE,'YYYY-MM-DD')||' 부터 적용됩니다.'  AS "ALARMCONTENT"
		 ,  ' ' AS "ROOMTITLE",  TO_CHAR( FRRR.RESULT_DATE,'YYYY-MM-DD') AS "ALARMDATE"
		 FROM FEED_REPORT_PENALTY FRP JOIN FEED_REPORT_RESULT FRRR
		 ON FRRR.FEED_REPORT_RESULT_NUM = FRP.FEED_REPORT_RESULT_NUM
		 JOIN FEED_REPORT_RESULT_TYPE FRRT
		 ON FRRR.FEED_REPORT_RESULT_TYPE_NUM = FRRT.FEED_REPORT_RESULT_TYPE_NUM
		 JOIN FEED_REPORT_RECEIPT FRR 
		 ON FRR.FEED_report_receipt_num = FRRR.FEED_report_receipt_num
		WHERE FRP.ALARM_CHECK_DATE IS NULL
		AND FRRT.FEED_REPORT_RESULT_TYPE_NUM =2
		AND FRRR.ID_NUM = #{my_id}
		
		UNION ALL
		
		 SELECT 
		  FRP.PM_REPORT_PENALTY_NUM AS "NUM",   '플래너 메모 신고 패널티 알림' AS "TITLE"
		 ,TO_CHAR(FRR.REPORT_DATE,'YYYY-MM-DD') ||'일자 플래너 메모 신고가 처리되어 <BR>" '|| FRRT.CONTENT || ' " 패널티를 받았습니다.
         <BR> 패널티는'|| TO_CHAR(FRP.START_DATE,'YYYY-MM-DD')||' 부터 적용됩니다.'  AS "ALARMCONTENT"
		 , ' ' AS "ROOMTITLE",  TO_CHAR( FRRR.RESULT_DATE,'YYYY-MM-DD') AS "ALARMDATE"
		 FROM PM_REPORT_PENALTY FRP JOIN PM_REPORT_RESULT FRRR
		 ON FRRR.PM_REPORT_RESULT_NUM = FRP.PM_REPORT_RESULT_NUM
		 JOIN PM_REPORT_RESULT_TYPE FRRT
		 ON FRRR.PM_REPORT_RESULT_TYPE_NUM = FRRT.PM_REPORT_RESULT_TYPE_NUM
		 JOIN PM_REPORT_RECEIPT FRR 
		 ON FRR.PM_report_receipt_num = FRRR.PM_report_receipt_num
		JOIN  PLANNER_MEMO F
		ON FRR.PLANNER_MEMO_NUM = F.PLANNER_MEMO_NUM
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = F.ROOM_NUM
		WHERE FRP.ALARM_CHECK_DATE IS NULL
		AND FRRT.PM_REPORT_RESULT_TYPE_NUM >=3 AND  FRRT.PM_REPORT_RESULT_TYPE_NUM <=7
		AND BR.ID_NUM =#{my_id}
		
		UNION ALL
		
		 SELECT  
		   FRP.PM_REPORT_PENALTY_NUM AS "NUM",  '플래너 메모 신고 패널티 알림' AS "TITLE"
		 ,TO_CHAR(FRR.REPORT_DATE,'YYYY-MM-DD') ||' 일자 플래너 메모 신고가 처리되어 <BR>" 신고자 계정정지 3일 " 패널티를 받았습니다. <BR>패널티는 '|| TO_CHAR(FRP.START_DATE,'YYYY-MM-DD')||' 부터 적용됩니다.'  AS "ALARMCONTENT"
		 ,  ' ' AS "ROOMTITLE",  TO_CHAR( FRRR.RESULT_DATE,'YYYY-MM-DD') AS "ALARMDATE"
		 FROM PM_REPORT_PENALTY FRP JOIN PM_REPORT_RESULT FRRR
		 ON FRRR.PM_REPORT_RESULT_NUM = FRP.PM_REPORT_RESULT_NUM
		 JOIN PM_REPORT_RESULT_TYPE FRRT
		 ON FRRR.PM_REPORT_RESULT_TYPE_NUM = FRRT.PM_REPORT_RESULT_TYPE_NUM
		 JOIN PM_REPORT_RECEIPT FRR 
		 ON FRR.PM_report_receipt_num = FRRR.PM_report_receipt_num
		JOIN  PLANNER_MEMO F
		ON FRR.PLANNER_MEMO_NUM = F.PLANNER_MEMO_NUM
		WHERE FRP.ALARM_CHECK_DATE IS NULL
		AND FRRT.PM_REPORT_RESULT_TYPE_NUM =2
		AND FRR.ID_NUM = #{my_id}
		
		UNION ALL
		
		 SELECT  
		  FRP.CM_REPORT_PENALTY_NUM AS "NUM",  '컬렉션 메모 신고 패널티 알림' AS "TITLE"
		 ,TO_CHAR(FRR.REPORT_DATE,'YYYY-MM-DD') ||' 일자 컬렉션 메모 신고가 처리되어 <BR> '|| FRRT.CONTENT || ' " 패널티를 받았습니다. <BR>패널티는 '|| TO_CHAR(FRP.START_DATE,'YYYY-MM-DD')||' 부터 적용됩니다.'  AS "ALARMCONTENT"
		 , ' ' AS "ROOMTITLE",  TO_CHAR( FRRR.RESULT_DATE,'YYYY-MM-DD') AS "ALARMDATE" 
		 FROM CM_REPORT_PENALTY FRP JOIN CM_REPORT_RESULT FRRR
		 ON FRRR.CM_REPORT_RESULT_NUM = FRP.CM_REPORT_RESULT_NUM
		 JOIN CM_REPORT_RESULT_TYPE FRRT
		 ON FRRR.CM_REPORT_RESULT_TYPE_NUM = FRRT.CM_REPORT_RESULT_TYPE_NUM
		 JOIN CM_REPORT_RECEIPT FRR 
		 ON FRR.CM_report_receipt_num = FRRR.CM_report_receipt_num
		JOIN  COLLECTION_MEMO F
		ON FRR.COLLECTION_MEMO_NUM = F.COLLECTION_MEMO_NUM
		JOIN MEM_JOIN MJ 
		ON F.mem_join_num = MJ.mem_join_num
		WHERE FRP.ALARM_CHECK_DATE IS NULL
		AND FRRT.CM_REPORT_RESULT_TYPE_NUM >=3 AND  FRRT.CM_REPORT_RESULT_TYPE_NUM <=7
		AND MJ.ID_NUM = #{my_id}
		
		UNION ALL
		
		 SELECT  
		 FRP.CM_REPORT_PENALTY_NUM AS "NUM", '컬렉션 메모 신고패널티 알림' AS "TITLE"
		 , TO_CHAR(FRR.REPORT_DATE,'YYY-MM-DD') ||' 일자 컬렉션 메모 신고가 처리되어 <BR>" 신고자 계정정지 3일 " 패널티를 받았습니다. <BR>패널티는 '|| TO_CHAR(FRP.START_DATE,'YYYY-MM-DD')||' 부터 적용됩니다.'  AS "ALARMCONTENT"
		 ,  ' ' AS "ROOMTITLE"
		 ,  TO_CHAR( FRRR.RESULT_DATE,'YYYY-MM-DD') AS "ALARMDATE"
		 FROM CM_REPORT_PENALTY FRP JOIN CM_REPORT_RESULT FRRR
		 ON FRRR.CM_REPORT_RESULT_NUM = FRP.CM_REPORT_RESULT_NUM
		 JOIN CM_REPORT_RESULT_TYPE FRRT
		 ON FRRR.CM_REPORT_RESULT_TYPE_NUM = FRRT.CM_REPORT_RESULT_TYPE_NUM
		 JOIN CM_REPORT_RECEIPT FRR 
		 ON FRR.CM_report_receipt_num = FRRR.CM_report_receipt_num
		WHERE FRP.ALARM_CHECK_DATE IS NULL
		AND FRRT.CM_REPORT_RESULT_TYPE_NUM =2
		AND FRR.ID_NUM = #{my_id}
		
		UNION ALL
		
		 SELECT  
		FRP.PF_REPORT_PENALTY_NUM AS "NUM", '프로필 신고 패널티 알림' AS "TITLE" 
		 ,TO_CHAR(FRR.REPORT_DATE,'YYYY-MM-DD') ||' 일자 프로필 신고가 처리되어 <BR> '|| FRRT.CONTENT || ' " 패널티를 받았습니다. <BR>패널티는 '|| TO_CHAR(FRP.START_DATE,'YYYY-MM-DD')||' 부터 적용됩니다.'  AS "ALARMCONTENT"
		  ,' ' AS "ROOMTITLE"
		 ,  TO_CHAR( FRRR.RESULT_DATE,'YYYY-MM-DD') AS "ALARMDATE"  
		 FROM PF_REPORT_PENALTY FRP JOIN PF_REPORT_RESULT FRRR
		 ON FRRR.PF_REPORT_RESULT_NUM = FRP.PF_REPORT_RESULT_NUM
		 JOIN PF_REPORT_RESULT_TYPE FRRT
		 ON FRRR.PF_REPORT_RESULT_TYPE_NUM = FRRT.PF_REPORT_RESULT_TYPE_NUM
		 JOIN PF_REPORT_RECEIPT FRR 
		 ON FRR.PF_report_receipt_num = FRRR.PF_report_receipt_num
		WHERE FRP.ALARM_CHECK_DATE IS NULL
		AND FRRT.PF_REPORT_RESULT_TYPE_NUM >=3 AND  FRRT.PF_REPORT_RESULT_TYPE_NUM <=7
		AND FRR.REPORTED_ID_NUM = #{my_id}
		
		UNION ALL
		
		 SELECT  
		  FRP.PF_REPORT_PENALTY_NUM AS "NUM", '프로필 신고 패널티 알림' AS "TITLE" 
		 ,TO_CHAR(FRR.REPORT_DATE,'YYYY-MM-DD') ||' 일자 프로필 신고가 처리되어 <BR> " 신고자 계정정지 3일 " 패널티를 받았습니다. <BR>패널티는 '|| TO_CHAR(FRP.START_DATE,'YYYY-MM-DD')||' 부터 적용됩니다.'  AS "ALARMCONTENT"
		  , ' ' AS "ROOMTITLE"
		 ,  TO_CHAR( FRRR.RESULT_DATE,'YYYY-MM-DD') AS "ALARMDATE" 
		
		 FROM PF_REPORT_PENALTY FRP JOIN PF_REPORT_RESULT FRRR
		 ON FRRR.PF_REPORT_RESULT_NUM = FRP.PF_REPORT_RESULT_NUM
		 JOIN PF_REPORT_RESULT_TYPE FRRT
		 ON FRRR.PF_REPORT_RESULT_TYPE_NUM = FRRT.PF_REPORT_RESULT_TYPE_NUM
		 JOIN PF_REPORT_RECEIPT FRR 
		 ON FRR.PF_report_receipt_num = FRRR.PF_report_receipt_num
		WHERE FRP.ALARM_CHECK_DATE IS NULL
		AND FRRT.PF_REPORT_RESULT_TYPE_NUM =2
		AND FRR.REPORTER_ID_NUM = #{my_id}
		
		
		UNION ALL
		
		
		SELECT
		NJRP.NOT_JOIN_REPORT_PENALTY_NUM AS "NUM", '불참 신고 패널티 알림' AS "TITLE"
		,' 방 '|| BR.ROOM_TITLE ||'에서 불참 신고가 처리되어 <BR> " 계정정지 7일 " 패널티를 받았습니다. <BR>패널티는 '|| TO_CHAR(START_DATE,'YYYY-MM-DD')||' 부터 적용됩니다.'  AS "ALARMCONTENT"
		,' ' AS "ROOMTITLE"
		, TO_CHAR( NJR.REPORT_DATE,'YYYY-MM-DD') AS "ALARMDATE" 
		 
		FROM NOT_JOIN_REPORT_PENALTY NJRP JOIN NOT_JOIN_REPORT NJR
		ON NJRP.NOT_JOIN_REPORT_NUM = NJR.NOT_JOIN_REPORT_NUM
		JOIN MEM_FINISH MF
		ON NJR.REPORTED_MEM_FINISH_NUM= MF.MEM_FINISH_NUM
		JOIN MEM_JOIN MJ
		ON MJ.MEM_JOIN_NUM = MF.MEM_JOIN_NUM
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = MJ.ROOM_NUM
		WHERE NJRP.ALARM_CHECK_DATE IS NULL
		AND MJ.ID_NUM = #{my_id}
		
		ORDER BY 5 DESC
			]]>
	</select>
	
	<select id="alarmCount" resultType="Integer">
	<![CDATA[
	SELECT COUNT(*) AS COUNT
	FROM
	(
		SELECT  E.EXIT_NUM AS "NUM", '강제퇴장 알림' AS "TITLE", 
    '방장에 의해 강제퇴장 되었습니다.' AS "ALARMCONTENT"
    , BR.ROOM_TITLE AS "ROOMTITLE" 
    , TO_CHAR(E.EXIT_DATE,'YYYY-MM-DD') AS "ALARMDATE"
		FROM EXIT E JOIN MEM_JOIN MJ 
		ON E.mem_join_num = MJ.mem_join_num
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = MJ.ROOM_NUM
		WHERE E.EXIT_REASON_NUM = 2
		AND E.ALARM_CHECK_DATE IS NULL
		AND E.MEM_JOIN_NUM IN (SELECT MEM_JOIN_NUM
		                                        FROM MEM_JOIN MJ 
		                                        WHERE MJ.ID_NUM = #{my_id})
		UNION ALL
		
		SELECT   E.EXIT_NUM AS "NUM", '방 삭제 알림' AS "TITLE", '방장이 방을 삭제하여 방 참여가 취소되었습니다.' AS "ALARMCONTENT", BR.ROOM_TITLE AS "ROOMTITLE" ,  TO_CHAR(E.EXIT_DATE,'YYYY-MM-DD') AS "ALARMDATE"
		FROM EXIT E JOIN MEM_JOIN MJ 
		ON E.mem_join_num = MJ.mem_join_num
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = MJ.ROOM_NUM
		WHERE E.EXIT_REASON_NUM = 3
		AND E.ALARM_CHECK_DATE IS NULL
		AND E.MEM_JOIN_NUM IN  (SELECT MEM_JOIN_NUM
		                                        FROM MEM_JOIN MJ 
		                                        WHERE MJ.ID_NUM = #{my_id})
		
		UNION ALL
		
		SELECT  HPS.HOST_PASS_ALARM_NUM AS "NUM", '방장 패스 알림' AS "TITLE", '방장이 '|| HP.DAY ||'일차 패스를 눌렀습니다.' AS "ALARMCONTENT", BR.ROOM_TITLE AS "ROOMTITLE" ,  TO_CHAR(HP.PASS_DATE,'YYYY-MM-DD') AS "ALARMDATE"
		FROM HOST_PASS HP JOIN HOST_PASS_ALARM HPS
		ON HP.HOST_PASS_NUM = HPS.HOST_PASS_NUM
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = HP.ROOM_NUM
		WHERE HPS.ALARM_CHECK_DATE IS NULL
		AND HPS.MEM_JOIN_NUM IN (SELECT OG.MEM_JOIN_NUM
		                                            FROM ONGOING OG JOIN MEM_JOIN MJ 
		                                            ON mj.mem_join_num = og.mem_join_num
		                                            WHERE MJ.ID_NUM = #{my_id})
		UNION ALL                     
		
		SELECT BA.BOOKMARK_ALARM_NUM AS "NUM",  '북마크 방 참여 가능 알림' AS "TITLE",  '해당 방에 참여가 가능합니다.' AS "ALARMCONTENT", BR.ROOM_TITLE AS "ROOMTITLE" , TO_CHAR(BA.ALARM_ADD_DATE,'YYYY-MM-DD') AS "ALARMDATE"
		FROM BOOKMARK_ALARM BA JOIN BOOKMARK B
		ON ba.bookmark_num = b.bookmark_num
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = B.ROOM_NUM
		JOIN MEMBER M
		ON m.mem_num = b.mem_num
		WHERE ALARM_CHECK_DATE IS NULL
		  AND M.ID_NUM = #{my_id}
		  
		  UNION ALL            
		  
		SELECT  GA.GO_ALARM_NUM AS "NUM", '방 출발 가능 알림' AS "TITLE", '해당 방에 출발이 가능합니다.' AS "ALARMCONTENT", BR.ROOM_TITLE AS "ROOMTITLE" , TO_CHAR(GA.GO_ALARM_ADD_DATE,'YYYY-MM-DD')  AS "ALARMDATE"
		FROM GO_ALARM GA JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = GA.ROOM_NUM
		WHERE BR.ID_NUM = #{my_id}
		AND ALARM_CHECK_DATE IS NULL
		
		UNION ALL  
		 
		SELECT MF.MEM_FINISH_NUM AS "NUM",  '방 출발 알림' AS "TITLE",  '해당 방이 출발하였습니다. ' AS "ALARMCONTENT", BR.ROOM_TITLE AS "ROOMTITLE" , TO_CHAR(BR.FINAL_GO_DATE,'YYYY-MM-DD')  AS "ALARMDATE"
		FROM MEM_FINISH MF JOIN MEM_JOIN MJ 
		ON MF.mem_join_num = MJ.mem_join_num
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = MJ.ROOM_NUM
		WHERE MF.GO_ALARM_CHECK_DATE IS NULL
		AND MJ. ID_NUM  =#{my_id}
		AND BR.FINAL_GO_DATE IS NOT NULL
		
		 UNION ALL  
		 
		SELECT MF.MEM_FINISH_NUM AS "NUM", '여행 점수 알림' AS "TITLE", TO_CHAR(TRIP_END_DATE +14,'YYYY-MM-DD') || ' 까지 여행을 같이 다녀온 메이트에게 여행 점수를 줄 수 있습니다. ' 
		AS "ALARMCONTENT", BR.ROOM_TITLE AS "ROOMTITLE" , TO_CHAR(BR.TRIP_END_DATE+1,'YYYY-MM-DD') AS "ALARMDATE"
		FROM MEM_FINISH MF JOIN MEM_JOIN MJ 
		ON MF.mem_join_num = MJ.mem_join_num
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = MJ.ROOM_NUM   
		WHERE SYSDATE - TRIP_END_DATE >0
		 AND MJ.ID_NUM = #{my_id}
		 AND ALARM_CHECK_DATE IS NULL
		 
		  UNION ALL  
		 
		
		SELECT FRR.FEED_REPORT_RECEIPT_NUM AS "NUM", '피드 신고 알림' AS "TITLE", '피드 신고를 받았습니다. ' AS "ALARMCONTENT",  BR.ROOM_TITLE AS "ROOMTITLE",  TO_CHAR( FRR.REPORT_DATE,'YYYY-MM-DD')  AS "ALARMDATE"
		FROM FEED_REPORT_RECEIPT FRR JOIN FEED F 
		ON FRR.FEED_NUM = F.FEED_NUM
		JOIN REPORT_REASON RR
		ON RR.REPORT_REASON_NUM = FRR.REPORT_REASON_NUM
		JOIN MEM_JOIN MJ 
		ON F.mem_join_num = MJ.mem_join_num
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = MJ.ROOM_NUM   
		WHERE ALARM_CHECK_DATE IS NULL
		 AND MJ.ID_NUM = #{my_id}
		 
		 UNION ALL
		 
		 SELECT FRR.CM_REPORT_RECEIPT_NUM AS "NUM",'컬렉션 메모 신고 알림' AS "TITLE", '컬렉션 메모 신고를 받았습니다.  ' AS "ALARMCONTENT",  BR.ROOM_TITLE AS "ROOMTITLE", TO_CHAR( FRR.REPORT_DATE,'YYYY-MM-DD')  AS "ALARMDATE"
		FROM CM_REPORT_RECEIPT FRR JOIN COLLECTION_MEMO F 
		ON FRR.COLLECTION_MEMO_NUM = F.COLLECTION_MEMO_NUM
		JOIN REPORT_REASON RR
		ON RR.REPORT_REASON_NUM = FRR.REPORT_REASON_NUM
		JOIN MEM_JOIN MJ 
		ON F.mem_join_num = MJ.mem_join_num
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = MJ.ROOM_NUM   
		WHERE ALARM_CHECK_DATE IS NULL
		 AND MJ.ID_NUM = #{my_id}
		 
		  UNION ALL
		 
		 SELECT FRR.PM_REPORT_RECEIPT_NUM AS "NUM", '플래너 메모 신고 알림' AS "TITLE", '플래너 메모 신고를 받았습니다. ' AS "ALARMCONTENT",  BR.ROOM_TITLE AS "ROOMTITLE",  TO_CHAR( FRR.REPORT_DATE,'YYYY-MM-DD')  AS "ALARMDATE"
		FROM PM_REPORT_RECEIPT FRR JOIN PLANNER_MEMO F 
		ON FRR.PLANNER_MEMO_NUM = F.PLANNER_MEMO_NUM
		JOIN REPORT_REASON RR
		ON RR.REPORT_REASON_NUM = FRR.REPORT_REASON_NUM
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = F.ROOM_NUM   
		WHERE ALARM_CHECK_DATE IS NULL
		 AND BR.ID_NUM = #{my_id}
		 
		UNION ALL
		 
		 SELECT FRR.ROOM_REPORT_RECEIPT_NUM AS "NUM", '방 신고 알림' AS "TITLE", '방 신고를 받았습니다. ' AS "ALARMCONTENT",  BR.ROOM_TITLE AS "ROOMTITLE",  TO_CHAR( FRR.REPORT_DATE,'YYYY-MM-DD')  AS "ALARMDATE"
		FROM ROOM_REPORT_RECEIPT FRR 
		JOIN REPORT_REASON RR
		ON RR.REPORT_REASON_NUM = FRR.REPORT_REASON_NUM
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = FRR.ROOM_NUM   
		WHERE ALARM_CHECK_DATE IS NULL
		 AND BR.ID_NUM = #{my_id}
		 
		 UNION ALL
		 
		SELECT FRR.PF_REPORT_RECEIPT_NUM AS "NUM",'프로필 신고 알림' AS "TITLE", '프로필 신고를 받았습니다. ' AS "ALARMCONTENT", ' ' AS "ROOMTITLE" , TO_CHAR( FRR.REPORT_DATE,'YYYY-MM-DD')  AS "ALARMDATE"
		FROM PF_REPORT_RECEIPT FRR 
		JOIN REPORT_REASON RR
		ON RR.REPORT_REASON_NUM = FRR.REPORT_REASON_NUM
		WHERE ALARM_CHECK_DATE IS NULL
		 AND REPORTED_ID_NUM = #{my_id}
		 
		  UNION ALL
		 
		 SELECT  
		  RRP.ROOM_REPORT_PENALTY_NUM AS "NUM", '방 신고 패널티 알림' AS "TITLE"
		 ,TO_CHAR(RR.REPORT_DATE,'YYYY-MM-DD') ||' 일자 방 신고가 처리되어 <BR> "'|| RRT.CONTENT || '" 패널티를 받았습니다. <BR>패널티는 '|| TO_CHAR(RRP.START_DATE,'YYYY-MM-DD') ||' 부터 적용됩니다.'  AS "ALARMCONTENT"
		  , ' ' AS "ROOMTITLE", TO_CHAR(RRR.REPORT_RESULT_DATE,'YYYY-MM-DD')    AS "ALARMDATE" 
		 FROM ROOM_REPORT_PENALTY RRP JOIN ROOM_REPORT_RESULT RRR
		 ON RRR.ROOM_REPORT_RESULT_NUM = RRP.ROOM_REPORT_RESULT_NUM
		 JOIN ROOM_REPORT_RESULT_TYPE RRT
		 ON RRR.REPORT_RESULT_TYPE_NUM = RRT.ROOM_REPORT_RESULT_TYPE_NUM
		 JOIN ROOM_REPORT_RECEIPT RR 
		 ON rr.room_report_receipt_num = rrr.room_report_receipt_num
		 JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = RR.ROOM_NUM
		WHERE RRP.ALARM_CHECK_DATE IS NULL
		AND RRT.ROOM_REPORT_RESULT_TYPE_NUM >=3 AND  RRT.ROOM_REPORT_RESULT_TYPE_NUM <=7
		AND BR.ID_NUM = #{my_id}
		
		 UNION ALL
		 
		  SELECT  
		   RRP.ROOM_REPORT_PENALTY_NUM AS "NUM", '방 신고 패널티 알림' AS "TITLE"
		  ,TO_CHAR(RR.REPORT_DATE,'YYYY-MM-DD') ||' 일자 방 신고가 처리되어 <BR>"'|| RRT.CONTENT || '" 패널티를 받았습니다. <BR>패널티는 '|| TO_CHAR(RRP.START_DATE,'YYYY-MM-DD')||' 부터 적용됩니다.'  AS "ALARMCONTENT"
		  ,  ' ' AS "ROOMTITLE", TO_CHAR(RRR.REPORT_RESULT_DATE,'YYYY-MM-DD')  AS "ALARMDATE"
		 FROM ROOM_REPORT_PENALTY RRP JOIN ROOM_REPORT_RESULT RRR
		 ON RRR.ROOM_REPORT_RESULT_NUM = RRP.ROOM_REPORT_RESULT_NUM
		 JOIN ROOM_REPORT_RESULT_TYPE RRT
		 ON RRR.REPORT_RESULT_TYPE_NUM = RRT.ROOM_REPORT_RESULT_TYPE_NUM
		 JOIN ROOM_REPORT_RECEIPT RR 
		 ON rr.room_report_receipt_num = rrr.room_report_receipt_num
		WHERE RRP.ALARM_CHECK_DATE IS NULL
		AND RRT.ROOM_REPORT_RESULT_TYPE_NUM =2
		AND rrr.ID_NUM = #{my_id}
		
		 UNION ALL
		 
		 SELECT  
		   FRP.FEED_REPORT_PENALTY_NUM AS "NUM", '피드 신고 패널티 알림' AS "TITLE" 
		 ,TO_CHAR(FRR.REPORT_DATE,'YYYY-MM-DD') ||' 일자 피드 신고가 처리되어 <br>"'|| FRRT.CONTENT || '" 패널티를 받았습니다. <BR>패널티는 '|| TO_CHAR(FRP.START_DATE,'YYYY-MM-DD')||' 부터 적용됩니다.'  AS "ALARMCONTENT"
		,  ' ' AS "ROOMTITLE", TO_CHAR( FRRR.RESULT_DATE,'YYYY-MM-DD')  AS "ALARMDATE"
		 FROM FEED_REPORT_PENALTY FRP JOIN FEED_REPORT_RESULT FRRR
		 ON FRRR.FEED_REPORT_RESULT_NUM = FRP.FEED_REPORT_RESULT_NUM
		 JOIN FEED_REPORT_RESULT_TYPE FRRT
		 ON FRRR.FEED_REPORT_RESULT_TYPE_NUM = FRRT.FEED_REPORT_RESULT_TYPE_NUM
		 JOIN FEED_REPORT_RECEIPT FRR 
		 ON FRR.FEED_report_receipt_num = FRRR.FEED_report_receipt_num
		JOIN FEED F 
		ON FRR.FEED_NUM = F.FEED_NUM
		JOIN MEM_JOIN MJ 
		ON F.mem_join_num = MJ.mem_join_num
		WHERE FRP.ALARM_CHECK_DATE IS NULL
		AND FRRT.FEED_REPORT_RESULT_TYPE_NUM >=3 AND  FRRT.FEED_REPORT_RESULT_TYPE_NUM <=7
		AND MJ.ID_NUM = #{my_id}
		
		UNION ALL
		 
		 SELECT 
		 FRP.FEED_REPORT_PENALTY_NUM AS "NUM",  '피드 신고 패널티 알림' AS "TITLE" 
		 ,TO_CHAR(FRR.REPORT_DATE,'YYYY-MM-DD') ||' 일자 피드 신고가 처리되어 <br>"'|| FRRT.CONTENT || ' " 패널티를 받았습니다. <BR>패널티는 '|| TO_CHAR(FRP.START_DATE,'YYYY-MM-DD')||' 부터 적용됩니다.'  AS "ALARMCONTENT"
		 ,  ' ' AS "ROOMTITLE",  TO_CHAR( FRRR.RESULT_DATE,'YYYY-MM-DD') AS "ALARMDATE"
		 FROM FEED_REPORT_PENALTY FRP JOIN FEED_REPORT_RESULT FRRR
		 ON FRRR.FEED_REPORT_RESULT_NUM = FRP.FEED_REPORT_RESULT_NUM
		 JOIN FEED_REPORT_RESULT_TYPE FRRT
		 ON FRRR.FEED_REPORT_RESULT_TYPE_NUM = FRRT.FEED_REPORT_RESULT_TYPE_NUM
		 JOIN FEED_REPORT_RECEIPT FRR 
		 ON FRR.FEED_report_receipt_num = FRRR.FEED_report_receipt_num
		WHERE FRP.ALARM_CHECK_DATE IS NULL
		AND FRRT.FEED_REPORT_RESULT_TYPE_NUM =2
		AND FRRR.ID_NUM = #{my_id}
		
		UNION ALL
		
		 SELECT 
		  FRP.PM_REPORT_PENALTY_NUM AS "NUM",   '플래너 메모 신고 패널티 알림' AS "TITLE"
		 ,TO_CHAR(FRR.REPORT_DATE,'YYYY-MM-DD') ||'일자 플래너 메모 신고가 처리되어 <BR>" '|| FRRT.CONTENT || ' " 패널티를 받았습니다.
         <BR> 패널티는'|| TO_CHAR(FRP.START_DATE,'YYYY-MM-DD')||' 부터 적용됩니다.'  AS "ALARMCONTENT"
		 , ' ' AS "ROOMTITLE",  TO_CHAR( FRRR.RESULT_DATE,'YYYY-MM-DD') AS "ALARMDATE"
		 FROM PM_REPORT_PENALTY FRP JOIN PM_REPORT_RESULT FRRR
		 ON FRRR.PM_REPORT_RESULT_NUM = FRP.PM_REPORT_RESULT_NUM
		 JOIN PM_REPORT_RESULT_TYPE FRRT
		 ON FRRR.PM_REPORT_RESULT_TYPE_NUM = FRRT.PM_REPORT_RESULT_TYPE_NUM
		 JOIN PM_REPORT_RECEIPT FRR 
		 ON FRR.PM_report_receipt_num = FRRR.PM_report_receipt_num
		JOIN  PLANNER_MEMO F
		ON FRR.PLANNER_MEMO_NUM = F.PLANNER_MEMO_NUM
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = F.ROOM_NUM
		WHERE FRP.ALARM_CHECK_DATE IS NULL
		AND FRRT.PM_REPORT_RESULT_TYPE_NUM >=3 AND  FRRT.PM_REPORT_RESULT_TYPE_NUM <=7
		AND BR.ID_NUM =#{my_id}
		
		UNION ALL
		
		 SELECT  
		   FRP.PM_REPORT_PENALTY_NUM AS "NUM",  '플래너 메모 신고 패널티 알림' AS "TITLE"
		 ,TO_CHAR(FRR.REPORT_DATE,'YYYY-MM-DD') ||' 일자 플래너 메모 신고가 처리되어 <BR> '|| FRRT.CONTENT || ' " 패널티를 받았습니다. <BR>패널티는 '|| TO_CHAR(FRP.START_DATE,'YYYY-MM-DD')||' 부터 적용됩니다.'  AS "ALARMCONTENT"
		 ,  ' ' AS "ROOMTITLE",  TO_CHAR( FRRR.RESULT_DATE,'YYYY-MM-DD') AS "ALARMDATE"
		 FROM PM_REPORT_PENALTY FRP JOIN PM_REPORT_RESULT FRRR
		 ON FRRR.PM_REPORT_RESULT_NUM = FRP.PM_REPORT_RESULT_NUM
		 JOIN PM_REPORT_RESULT_TYPE FRRT
		 ON FRRR.PM_REPORT_RESULT_TYPE_NUM = FRRT.PM_REPORT_RESULT_TYPE_NUM
		 JOIN PM_REPORT_RECEIPT FRR 
		 ON FRR.PM_report_receipt_num = FRRR.PM_report_receipt_num
		JOIN  PLANNER_MEMO F
		ON FRR.PLANNER_MEMO_NUM = F.PLANNER_MEMO_NUM
		WHERE FRP.ALARM_CHECK_DATE IS NULL
		AND FRRT.PM_REPORT_RESULT_TYPE_NUM =2
		AND FRR.ID_NUM = #{my_id}
		
		UNION ALL
		
		 SELECT  
		  FRP.CM_REPORT_PENALTY_NUM AS "NUM",  '컬렉션 메모 신고 패널티 알림' AS "TITLE"
		 ,TO_CHAR(FRR.REPORT_DATE,'YYYY-MM-DD') ||' 일자 컬렉션 메모 신고가 처리되어 <BR> '|| FRRT.CONTENT || ' " 패널티를 받았습니다. <BR>패널티는 '|| TO_CHAR(FRP.START_DATE,'YYYY-MM-DD')||' 부터 적용됩니다.'  AS "ALARMCONTENT"
		 , ' ' AS "ROOMTITLE",  TO_CHAR( FRRR.RESULT_DATE,'YYYY-MM-DD') AS "ALARMDATE" 
		 FROM CM_REPORT_PENALTY FRP JOIN CM_REPORT_RESULT FRRR
		 ON FRRR.CM_REPORT_RESULT_NUM = FRP.CM_REPORT_RESULT_NUM
		 JOIN CM_REPORT_RESULT_TYPE FRRT
		 ON FRRR.CM_REPORT_RESULT_TYPE_NUM = FRRT.CM_REPORT_RESULT_TYPE_NUM
		 JOIN CM_REPORT_RECEIPT FRR 
		 ON FRR.CM_report_receipt_num = FRRR.CM_report_receipt_num
		JOIN  COLLECTION_MEMO F
		ON FRR.COLLECTION_MEMO_NUM = F.COLLECTION_MEMO_NUM
		JOIN MEM_JOIN MJ 
		ON F.mem_join_num = MJ.mem_join_num
		WHERE FRP.ALARM_CHECK_DATE IS NULL
		AND FRRT.CM_REPORT_RESULT_TYPE_NUM >=3 AND  FRRT.CM_REPORT_RESULT_TYPE_NUM <=7
		AND MJ.ID_NUM = #{my_id}
		
		UNION ALL
		
		 SELECT  
		 FRP.CM_REPORT_PENALTY_NUM AS "NUM", '컬렉션 메모 신고패널티 알림' AS "TITLE"
		 , TO_CHAR(FRR.REPORT_DATE,'YYY-MM-DD') ||' 일자 컬렉션 메모 신고가 처리되어 <BR> '|| FRRT.CONTENT || ' " 패널티를 받았습니다. <BR>패널티는 '|| TO_CHAR(FRP.START_DATE,'YYYY-MM-DD')||' 부터 적용됩니다.'  AS "ALARMCONTENT"
		 ,  ' ' AS "ROOMTITLE"
		 ,  TO_CHAR( FRRR.RESULT_DATE,'YYYY-MM-DD') AS "ALARMDATE"
		 FROM CM_REPORT_PENALTY FRP JOIN CM_REPORT_RESULT FRRR
		 ON FRRR.CM_REPORT_RESULT_NUM = FRP.CM_REPORT_RESULT_NUM
		 JOIN CM_REPORT_RESULT_TYPE FRRT
		 ON FRRR.CM_REPORT_RESULT_TYPE_NUM = FRRT.CM_REPORT_RESULT_TYPE_NUM
		 JOIN CM_REPORT_RECEIPT FRR 
		 ON FRR.CM_report_receipt_num = FRRR.CM_report_receipt_num
		WHERE FRP.ALARM_CHECK_DATE IS NULL
		AND FRRT.CM_REPORT_RESULT_TYPE_NUM =2
		AND FRR.ID_NUM = #{my_id}
		
		UNION ALL
		
		 SELECT  
		FRP.PF_REPORT_PENALTY_NUM AS "NUM", '프로필 신고 패널티 알림' AS "TITLE" 
		 ,TO_CHAR(FRR.REPORT_DATE,'YYYY-MM-DD') ||' 일자 프로필 신고가 처리되어 <BR> '|| FRRT.CONTENT || ' " 패널티를 받았습니다. <BR>패널티는 '|| TO_CHAR(FRP.START_DATE,'YYYY-MM-DD')||' 부터 적용됩니다.'  AS "ALARMCONTENT"
		  ,' ' AS "ROOMTITLE"
		 ,  TO_CHAR( FRRR.RESULT_DATE,'YYYY-MM-DD') AS "ALARMDATE"  
		 FROM PF_REPORT_PENALTY FRP JOIN PF_REPORT_RESULT FRRR
		 ON FRRR.PF_REPORT_RESULT_NUM = FRP.PF_REPORT_RESULT_NUM
		 JOIN PF_REPORT_RESULT_TYPE FRRT
		 ON FRRR.PF_REPORT_RESULT_TYPE_NUM = FRRT.PF_REPORT_RESULT_TYPE_NUM
		 JOIN PF_REPORT_RECEIPT FRR 
		 ON FRR.PF_report_receipt_num = FRRR.PF_report_receipt_num
		WHERE FRP.ALARM_CHECK_DATE IS NULL
		AND FRRT.PF_REPORT_RESULT_TYPE_NUM >=3 AND  FRRT.PF_REPORT_RESULT_TYPE_NUM <=7
		AND FRR.REPORTED_ID_NUM = #{my_id}
		
		UNION ALL
		
		 SELECT  
		  FRP.PF_REPORT_PENALTY_NUM AS "NUM", '프로필 신고 패널티 알림' AS "TITLE" 
		 ,TO_CHAR(FRR.REPORT_DATE,'YYYY-MM-DD') ||' 일자 프로필 신고가 처리되어 <BR> '|| FRRT.CONTENT || ' " 패널티를 받았습니다. <BR>패널티는 '|| TO_CHAR(FRP.START_DATE,'YYYY-MM-DD')||' 부터 적용됩니다.'  AS "ALARMCONTENT"
		  , ' ' AS "ROOMTITLE"
		 ,  TO_CHAR( FRRR.RESULT_DATE,'YYYY-MM-DD') AS "ALARMDATE" 
		
		 FROM PF_REPORT_PENALTY FRP JOIN PF_REPORT_RESULT FRRR
		 ON FRRR.PF_REPORT_RESULT_NUM = FRP.PF_REPORT_RESULT_NUM
		 JOIN PF_REPORT_RESULT_TYPE FRRT
		 ON FRRR.PF_REPORT_RESULT_TYPE_NUM = FRRT.PF_REPORT_RESULT_TYPE_NUM
		 JOIN PF_REPORT_RECEIPT FRR 
		 ON FRR.PF_report_receipt_num = FRRR.PF_report_receipt_num
		WHERE FRP.ALARM_CHECK_DATE IS NULL
		AND FRRT.PF_REPORT_RESULT_TYPE_NUM =2
		AND FRR.REPORTER_ID_NUM = #{my_id}
		
		
		UNION ALL
		
		
		SELECT
		NJRP.NOT_JOIN_REPORT_PENALTY_NUM AS "NUM", '불참 신고 패널티 알림' AS "TITLE"
		,' 방 '|| BR.ROOM_TITLE ||'에서 불참 신고가 처리되어 <BR> " 계정정지 7일 " 패널티를 받았습니다. <BR>패널티는 '|| TO_CHAR(START_DATE,'YYYY-MM-DD')||' 부터 적용됩니다.'  AS "ALARMCONTENT"
		,' ' AS "ROOMTITLE"
		, TO_CHAR( NJR.REPORT_DATE,'YYYY-MM-DD') AS "ALARMDATE" 
		 
		FROM NOT_JOIN_REPORT_PENALTY NJRP JOIN NOT_JOIN_REPORT NJR
		ON NJRP.NOT_JOIN_REPORT_NUM = NJR.NOT_JOIN_REPORT_NUM
		JOIN MEM_FINISH MF
		ON NJR.REPORTED_MEM_FINISH_NUM= MF.MEM_FINISH_NUM
		JOIN MEM_JOIN MJ
		ON MJ.MEM_JOIN_NUM = MF.MEM_JOIN_NUM
		JOIN BUILD_ROOM BR
		ON BR.ROOM_NUM = MJ.ROOM_NUM
		WHERE NJRP.ALARM_CHECK_DATE IS NULL
		AND MJ.ID_NUM = #{my_id}
		
		ORDER BY 5 DESC
		)
			]]>
	</select>
	
	
	<update id="alarmReadExit">
		UPDATE EXIT
		SET ALARM_CHECK_DATE = SYSDATE
		WHERE EXIT_NUM = #{num}
	</update>
	
	<update id="alarmReadHP">
		UPDATE HOST_PASS_ALARM
		SET ALARM_CHECK_DATE = SYSDATE
		WHERE HOST_PASS_ALARM_NUM = #{num}
	</update>
	<update id="alarmReadMark">
		UPDATE BOOKMARK_ALARM
		SET ALARM_CHECK_DATE = SYSDATE
		WHERE BOOKMARK_ALARM_NUM = #{num}
	</update>
	<update id="alarmReadGoAlarm">
		UPDATE GO_ALARM
		SET ALARM_CHECK_DATE = SYSDATE
		WHERE GO_ALARM_NUM = #{num}
	</update>
	<update id="alarmReadMF">
		UPDATE MEM_FINISH
		SET ALARM_CHECK_DATE = SYSDATE
		WHERE MEM_FINISH_NUM = #{num}
	</update>
	<update id="alarmReadMFG">
		UPDATE MEM_FINISH
		SET GO_ALARM_CHECK_DATE = SYSDATE
		WHERE MEM_FINISH_NUM = #{num}
	</update>
	
	
	<update id="alarmReadFRR">
		UPDATE FEED_REPORT_RECEIPT
		SET ALARM_CHECK_DATE = SYSDATE
		WHERE FEED_REPORT_RECEIPT_NUM = #{num}
	</update>
	<update id="alarmReadCRR">
		UPDATE CM_REPORT_RECEIPT
		SET ALARM_CHECK_DATE = SYSDATE
		WHERE CM_REPORT_RECEIPT_NUM = #{num}
	</update>
	<update id="alarmReadPMRR">
		UPDATE PM_REPORT_RECEIPT
		SET ALARM_CHECK_DATE = SYSDATE
		WHERE PM_REPORT_RECEIPT_NUM = #{num}
	</update>
	<update id="alarmReadRRR">
		UPDATE ROOM_REPORT_RECEIPT
		SET ALARM_CHECK_DATE = SYSDATE
		WHERE ROOM_REPORT_RECEIPT_NUM = #{num}
	</update>
	<update id="alarmReadPFRR">
		UPDATE PF_REPORT_RECEIPT
		SET ALARM_CHECK_DATE = SYSDATE
		WHERE PF_REPORT_RECEIPT_NUM = #{num}
	</update>


	<update id="alarmReadRPP">
		UPDATE ROOM_REPORT_PENALTY
		SET ALARM_CHECK_DATE = SYSDATE
		WHERE ROOM_REPORT_PENALTY_NUM = #{num}
	</update>
	<update id="alarmReadFRP">
		UPDATE FEED_REPORT_PENALTY
		SET ALARM_CHECK_DATE = SYSDATE
		WHERE FEED_REPORT_PENALTY_NUM = #{num}
	</update>
	<update id="alarmReadPMRP">
		UPDATE PM_REPORT_PENALTY
		SET ALARM_CHECK_DATE = SYSDATE
		WHERE PM_REPORT_PENALTY_NUM = #{num}
	</update>
	<update id="alarmReadCRP">
		UPDATE CM_REPORT_PENALTY
		SET ALARM_CHECK_DATE = SYSDATE
		WHERE CM_REPORT_PENALTY_NUM = #{num}
	</update>
	<update id="alarmReadPFRP">
		UPDATE PF_REPORT_PENALTY
		SET ALARM_CHECK_DATE = SYSDATE
		WHERE PF_REPORT_PENALTY_NUM = #{num}
	</update>
	<update id="alarmReadNJRP">
		UPDATE NOT_JOIN_REPORT_PENALTY
		SET ALARM_CHECK_DATE = SYSDATE
		WHERE NOT_JOIN_REPORT_PENALTY_NUM = #{num}
	</update>


</mapper>